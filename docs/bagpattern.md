# BagPattern

## 概要

文字列を書式に従って解釈し、ネクストの生成法則を決定する\
この文字列のことをバッグパターンと呼ぶ

## 書式

### 例

`[@:6][@]*2`

IOTLJSZのうち6種類をランダムな順でネクストに追加\
その後IOTLJSZ全てをランダムな順で追加 ×2巡\
全てのピースを使い切った時点で終了（8段パフェ後 6ミノ+2巡）

`[@@]~`

IOTLJSZ×2セットの合計14ピースをランダムな順でネクストに追加\
14ピース全てが追加されたら再び14ピースをランダムな順で追加\
以降繰り返し（14Bag）

### 文字・記号の説明

- `IOTLJSZ`

  それぞれIミノ、Oミノ、Tミノ……を指す\
  また、バッグパターンとしてこの通り指定した場合には\
  そのまま I、O、T……の順番でネクストに追加する\
  （単体で記述したとき、それぞれのピースは\
  『要素』1つとしてカウントされる）

- `@`

  `IOTLJSZ`に置き換えられる（省略表記）

- `( ... )`

  丸括弧で囲んだ部分はグループとして解釈される\
  （グループは『要素』1つとしてカウントされる）

- `[ ... ]`

  角括弧で囲んだ部分はグループとして解釈される\
  また、角括弧内の『要素』はランダムな順番でネクストに追加される

  - `[ ... :N]`

    閉じ括弧の前に`:N`を記述すると\
    角括弧内の要素のうちN個の『要素』のみをネクストに追加する

- `*N`

  直前の『要素』をN回繰り返したものと解釈する

- `~`

  バッグパターンの最後に記述した場合、\
  最後の『要素』を無限に繰り返す\
  （`~`を記述しない場合は最後の『要素』でネクストが終了する）
  